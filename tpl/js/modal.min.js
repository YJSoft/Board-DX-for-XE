!function(a){var b=a.extend({topIndex:function(b){var c=a(b?b:"body"),d=c.is("body")?c:c.closest("body"),e=this.topZidx;if(!e){e=1;try{d.find("> *:not(script)").each(function(){var b=parseInt(a(this).css("z-index")||this.style.zIndex);b>e&&(e=b)})}catch(f){e=99999}e>9999999&&(e=9999999),this.topZidx=e}return e+999},waitMessage:function(b,c){var d=a(c?c:"body"),e=d.is("body")?d:d.closest("body");a(".wait[data-modal-child=message]",e).length||(b=b.setQuery("is_modal",""),$msg=a('<div class="message update wait" data-modal-child="message">').html("<p>"+waiting_message+'<br />If time delays continue, <a href="'+b+'"><span>click here</span></a>.</p>').css({position:"fixed",top:10,left:10,zIndex:this.topIndex(c)+9}),e.append($msg))},iFrame:function(b,c){var d,e=a("#"+b,c);return e.length?e.not(".pid_modal-frame").addClass("pid_modal-target"):(d=a("body",c),e=a('<section id="'+b+'" class="pid_modal-frame">').appendTo(d).hide()),e.find(".pid_modal-body").length||e.append(a('<div class="pid_modal-body">')),e},backDrop:function(b){var c=a("#pidModalBackdrop",b);return c.length||(c=a('<div id="pidModalBackdrop" class="pid_modal-backdrop">').appendTo(a("body",b)).hide()),c}});a.fn.extend({pidModalgoUrl:function(c,d,e,f){var g=a(this),h=a("#pidOiFrame",g),i=function(b){var c,d=b.contentDocument||b.contentWindow.document,e=d.scripts||{},f=!1;try{for(c in e)if("object"==typeof e[c]&&e[c].src.match(/beluxe/)){f=!0;break}f?a(b).parent().scrollTop(0):(a(d).find("a").click(function(b){b.stopPropagation(),b.preventDefault(),parent.location.replace(a(this).attr("href"))}),h.pidModalAutoResize())}catch(g){}};c=c.setQuery("is_modal",f),h.length?h.get(0).src=c:h=a('<iframe id="pidOiFrame" name="pid_oi_frame" data-resize="'+d+'" allowTransparency="true" frameborder="0" scrolling="yes" />').on("load",function(){i(this),e(this)}).attr("src",c).appendTo(a(".pid_modal-body:eq(0)",g)),b.waitMessage(c,h.closest("body"))},pidModalSetTitle:function(b,c,d){var e,f,g,h=function(b){var c,d={"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"'};return c=new RegExp("("+a.map(d,function(a,b){return b}).join("|")+")","g"),b.replace(c,function(a,b){return d[b]})},i=a(this),j=h(b),k=h(c),l=["pid_modal-head","pid_modal-foot"];f=i.find("."+l[0]),f.length||(f=a('<div class="'+l[0]+'">').hide().prependTo(i)),g=i.find("."+l[1]),g.length||(g=a('<div class="'+l[1]+'">').hide().appendTo(i)),j&&":INHERIT:"!==j.substring(0,9)?(j=":GETHTML:"===j.substring(0,9)?a(j.substring(9)).html():"<div>"+j+"</div>",f.html(j).css("display",j?"block":"none")):j||f.html("").css("display","none"),k&&":INHERIT:"!==k.substring(0,9)?(k=":GETHTML:"===k.substring(0,9)?a(k.substring(9)).html():"<div>"+k+"</div>",g.html(k).css("display",k?"block":"none")):k||g.html("").css("display","none"),e=i.find(".pid_modal-close"),e.length||(e=a('<button type="button" title="press esc to close" class="pid_modal-close">&times;</button>').click(d),i.prepend(e))},pidModalAutoResize:function(){var c,d,e,f,g,h,i,j,k,l,m=a(this);if(e=m[0].contentDocument||m[0].contentWindow.document,void 0!==e){if(e=a("body",e),c=m.parent().parent(),$target=c.closest("body"),!e.text())return void c.hide();clearInterval(m.data("timer")||0),m.add(e.addClass("pid_modal-document")).scrollTop(0),f=a(".pid_modal-head",c),h=a(".pid_modal-body",c),g=a(".pid_modal-foot",c),k=m.attr("data-resize")||"auto";var n=function(){return setInterval(function(){var a=e.outerHeight(!0);a>10&&(1===h.height()||m.height()!==a)&&(h.height(""),m.height(a)),c.find("#pidOiFrame").length||clearInterval(l)},500)},o=function(){return setInterval(function(){var a,b,n,o;i=d.width(),n=e.outerHeight(!0),c.outerWidth(i-80),n>10&&(j=d.height(),b=(f.outerHeight(!0)||0)+(g.outerHeight(!0)||0),o=j-b-100,o="hfix"===k||n>o?o:n,(1===h.height()||m.height()!==o)&&(h.height(""),m.height(o),e.css("overflow-y",n>o?"auto":"hidden")),b=c.outerHeight(!0),a=Math.floor((j-b)/2-10),c.css({top:a>10?a:10,left:Math.floor((i-c.outerWidth(!0))/2)})),c.find("#pidOiFrame").length||clearInterval(l)},500)};c.is(".pid_modal-target")?(m.attr("scrolling","no"),h.height(1),c.css({top:"",left:""}).show(),l=n(),a("[data-modal-child=message]",$target).fadeOut(1500,function(){a(this).remove()})):(d=b.backDrop($target),i=d.width(),h.height(1),c.outerWidth(i-80).show(),c.position().left<1?c.animate({top:10,left:Math.floor((i-c.outerWidth(!0))/2)},{complete:function(){l=o(),a("[data-modal-child=message]",$target).fadeOut(1500,function(){a(this).remove()})}}):l=o()),m.data("timer",l)}},pidModalWindow:function(c,d){this.not(".pid_modal-anchor").addClass("pid_modal-anchor").each(function(){var b=(a(this).attr("type")||"").split("/");"modal"===b[1]&&(this.modalId=b[2]?b[2]:"pidModalFrame")}).click(function(){var d=a(this),e=b.iFrame(this.modalId,c);return e.hide().css({top:"0",left:"-150%"}),d.trigger("open.mw"),!1}).on("open.mw",function(){var e,f,g,h,i,j,k,l=a(this),m=0;if(h=a.Event("before-open.mw"),l.trigger(h),h.isDefaultPrevented())return!1;e=b.iFrame(this.modalId,c),e.is(".pid_modal-target")||e.pidModalSetTitle(l.attr("data-header")||l.attr("title")||"",l.attr("data-footer")||"",function(){return l.trigger("close.mw"),!1}),j=l.data("go-url")||l.attr("href")||"about:blank",k=e.is(".pid_modal-target")?3:1,"showing"!==e.data("state")&&(e.data("state","showing"),i=l.data("duration")||"fast",e.is(".pid_modal-target")?e.find("> *").hide(i,function(a){e.find("> .pid_modal-body").show()}):(a(document).on("keydown.mw",function(a){return 27===a.which?(l.trigger("close.mw"),!1):void 0}),g=a("body",c),f=b.backDrop(c).css("z-index","1"),e.css("z-index","5"),b.body_oflow||(b.body_oflow=g.css("overflow-x")),m=b.topIndex(c),f.css("z-index",m).show(),e.css("z-index",m+5).find(".pid_modal-close:first").focus(),g.css("overflow-x","hidden"),d&&f.click(function(){return l.trigger("close.mw"),!1})));var n=function(a){l.trigger("after-open.mw",[a])};e.pidModalgoUrl(j,l.attr("data-resize")||"auto",n,k)}).on("close.mw",function(){var d,e,f,g,h=a(this);if(f=a.Event("before-close.mw"),h.trigger(f),f.isDefaultPrevented())return!1;try{d=b.iFrame(this.modalId,c),d.attr("data-parent-reload")&&pidModalParentReload()}catch(i){return pidModalParentReload(),!1}g=h.data("duration")||"fast",d.data("state","hiding");var j=function(){h.trigger("after-close.mw")};d.is(".pid_modal-target")?d.find("> *").show(g,function(a){d.find("> .pid_modal-head").hide(),d.find("> .pid_modal-body").hide(),d.find("> .pid_modal-foot").hide()}):(e=b.backDrop(c),d.fadeOut(g,function(){j();var d=a(this).hide().find("> .pid_modal-body");a("body",c).css("overflow-x",b.body_oflow||"auto"),e.hide(),d.children().remove()}))})},pidModalFlashFix:function(){a("embed[type*=flash]").each(function(){var b=a(this);"transparent"!=b.attr("wmode"),b.attr("wmode","opaque")}),a("iframe[src*=youtube]").each(function(){var b=a(this);b.attr("src",b.attr("src").setQuery("wmode","opaque"))})}});try{a(window.frameElement).filter(function(){return a(this).is("[id=pidOiFrame]")}).is(function(){var c=a(this),d=c.closest("body");b.waitMessage(window.location.href,d),c.pidModalAutoResize(),window.parent.pidModalParentReload=function(){window.parent.location.replace(window.location.href.setQuery("act","").setQuery("page","").setQuery("is_modal","").setQuery("document_srl","").setQuery("cate_trace",""))},a(document).on("ready",function(){a("[data-modal-hide]").on("click",function(){return c.parent().parent().find(".pid_modal-close:first").click(),!1})}),a(window).on("unload",function(){c.parent().height(1).parent().hide().css({top:"0",left:"-150%"}),a("[data-modal-child=message]",d).remove()})})}catch(c){}}(jQuery);