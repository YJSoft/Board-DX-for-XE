<include target="___setting.html" />

<article class="bd">

	<div cond="$is_cts" class="sd">
		<include target="category.html" />
	</div>

	<section class="st">

		{@ $not_permitted = $XE_VALIDATOR_ERROR == '-1380'}

		<h2 class="cb gn">
			<a href="#categoryOpen">
				<span class="ca">{$lang->confirm_delete}</span>
			</a>
			<a href="#" onclick="history.back(-1);return false;" class="wt bk">{$lang->cmd_back}</a>
		</h2>

		<!--@if($not_permitted)-->
			<div>{$XE_VALIDATOR_MESSAGE}</div>
			<form ruleset="checkPassword" action="./" method="post" class="ff tgo open">
				<input cond="$act!='dispBoardDeleteComment'" type="hidden" name="document_srl" value="{$document_srl}" />
				<input cond="$act=='dispBoardDeleteComment'" type="hidden" name="comment_srl" value="{$comment_srl}" />
				<input type="hidden" name="act" value="procBoardVerificationPassword" />
				<ul>
					<li>
						<label for="cpw">{$lang->password}</label>
						<input type="password" name="password" id="cpw" />
					</li>
				</ul>
				<div class="bna">
					<a class="bn white" href="{getUrl('','mid',$mid,'act','','document_srl',$document_srl,'comment_srl',($parent_srl?$parent_srl:$comment_srl),'parent_srl','')}">{$lang->cmd_back}</a>
					<input type="submit" value="{$lang->cmd_input}" class="bn dark" />
				</div>
			</form>
		<!--@else-->
			{@
				$rulepath = $tpl_path.'../../../ruleset/'.($act=='dispBoardDeleteComment'?'deleteComment':'deleteDocument').'.xml';
				Context::addJsFile($rulepath, false, '', 0, 'head', true);

				$ds_nick = $ci['nick_name']->display == 'Y';
				$ds_user =	$ci['user_name']->display == 'Y';

				$act=='dispBoardDeleteComment'?$ds_mtlng=false:0;
				$un_extra = $ds_mtlng?$oDocument->get('extra_vars'):null;
				$un_extra = is_string($un_extra)?unserialize($un_extra):$un_extra;
			}
			<form action="./" method="post" class="ff">
				<input type="hidden" name="entry" value="{$entry}" />
				<input type="hidden" name="module_srl" value="{$mi->module_srl}" />
				<input type="hidden" name="ruleset" value="{$act=='dispBoardDeleteComment'?'deleteComment':'deleteDocument'}" />
				<input type="hidden" name="act" value="{$act=='dispBoardDeleteComment'?'procBoardDeleteComment':'procBoardDeleteDocument'}" />
				<input type="hidden" name="category_srl" value="{$category_srl}" />
				<ul>
					<!--@if($act=='dispBoardDeleteComment')-->
					<li cond="$oComment->isExists()">
						<h3>{$lang->comment}:
							{cut_str((!$oComment->get('member_srl')||$ds_nick||!$ds_user)?$oComment->getNickName():$oComment->getUserName(), $mi->nickname_length)}
						</h3>
						<hr />
						<p>{$oComment->getContentText(255)}</p>
						<hr />
					</li>
					<input type="hidden" name="comment_srl" value="{$oComment->comment_srl}" />
					<!--@else-->
					<li cond="$oDocument->isExists()">
						<h3>{$lang->document}:
							{cut_str((!$oDocument->get('member_srl')||$ds_nick||!$ds_user)?$oDocument->getNickName():$oDocument->getUserName(), $mi->nickname_length)}
						</h3>
						<hr />
						<strong>{$oDocument->getTitle()}</strong>
						<hr />
						<p>{$oDocument->getContentText(255)}</p>
					</li>
					<!--@endif-->
				</ul>
				<input type="hidden" name="document_srl" value="{$oDocument->document_srl}" />

				<div class="bna">
					<a href="{getUrl('','mid',$mid,'document_srl',$document_srl,'comment_srl',($parent_srl?$parent_srl:$comment_srl),'parent_srl','')}" class="bn white"><span>{$lang->cmd_back}</span></a>
					<button cond="$ds_mtlng&&count($un_extra->beluxe->langs)" type="submit" name="multilingual" value="Y" class="bn dark">{$lang->cmd_current_lang_delete}</button>
					<button type="submit" accesskey="s" class="bn dark">{$lang->cmd_delete}</button>
				</div>

			</form>
		<!--@endif-->

	</section>
</article>
