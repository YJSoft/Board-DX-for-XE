jQuery(function(a){String.prototype.pidUcfirst=function(){var a=this;return a.charAt(0).toUpperCase()+a.slice(1)},a("a[href=#siManageBtn]").click(function(){a(".scElps ._first").each(function(){a(this).css("width",a(this).width()-30+"px")}),a(".scCheck").show("slow");var b=a(this).next();return a("select",b).change(function(){var b=a(this).val()||"",c=[];return a("input[name=cart]:checked").each(function(b){c[b]=a(this).val()}),c.length<1?alert("Please select the items.",this)||!1:void exec_json("beluxe.procBeluxeChangeCustomStatus",{mid:current_mid,new_value:b,target_srls:c.join(",")},completeCallModuleAction)}),a("a[data-type]",b).click(function(){switch(a(this).attr("data-type")){case"manage":popopen(request_uri+"?module=document&act=dispDocumentManageDocument","manageDocument");break;case"admin":location.href=current_url.setQuery("act","dispBeluxeAdminModuleInfo")}return!1}),b.show("slow"),a(this).hide().prevAll().hide(),!1}),a("#siCat.tabn,#siCat.colm").each(function(){var b=a(this),c=b.hasClass("colm"),d=a("ul",this),e=a("li.active:last",this),f=parseInt(d.css("margin-top"))||0,g=parseInt(d.height())-f,h=parseInt(a("li:first",this).height())+parseInt(a("li:first",this).css("margin-bottom")),i=parseInt((e.position(b)?e.position(b).top:0)/h);if(i>0&&d.css("margin-top",i*h*-1+"px"),h>=g?(a(".scCaNavi",this).css("display","none"),d.css("margin-right",c?"18px":"0")):(a(".scCaNavi a:eq(0)",this).click(function(){var a=parseInt(d.css("margin-top"));return f>a&&d.css("margin-top",a+h+f+"px"),!1}),a(".scCaNavi a:eq(1)",this).click(function(){var a=parseInt(d.css("margin-top"));return a-h-f>-g&&d.css("margin-top",a-h-f+"px"),!1})),c){var j=a("#siLst:not(.noheader):eq(0), #siHrm:not(.noheader):eq(0)"),k=a(".scCaLock",this),l=getCookie("scCaLock");if(!j.length)return;j.length>1&&(j=a(j.get(0))),b.css({display:"none",visibility:"visible"}),b.css({top:j.position().top+"px",width:j.width()-10+"px"}),k&&(k.click(function(){return a(this).hasClass("active")?(a(this).removeClass("active"),setCookie("scCaLock","hide",null,"/")):(a(this).addClass("active"),setCookie("scCaLock","",null,"/")),!1}),"hide"==l&&k.removeClass("active")),"true"==b.attr("data-autohide")&&(a("thead tr:first th:not(.sort), ul.scFrm:first",j).mouseenter(function(c){var d=c.target,e=a("> span.sort:eq(0)",d);e.length&&c.offsetX>e.position().left||b.trigger("fadeIn.fast")}),a(document).mousemove(function(c){var d=c.target;a(d).parents().add(d).index(b)>-1||b.is(":hidden")||"1"!=b.css("opacity")||k.hasClass("active")||b.fadeOut()})),b.bind("fadeIn.fast",function(){a(this).css({top:j.position().top+"px",width:j.width()-10+"px"}).fadeIn("fast")}).bind("fadeOut.fast",function(){b.fadeOut()})}}),a("#siLst.gall .scInfo[data-autohide=true]").each(function(){var b=a(this),c=b.closest(".scItem"),d=a(".nick_name",this),e=b.prev("span.prtImg"),f="true"==b.attr("data-fade");c.mouseenter(function(a){e.hide("slow"),f?b.fadeIn("slow"):b.slideDown(),d.show("slow")}).mouseleave(function(a){d.hide("slow"),f?b.fadeOut():b.slideUp(),e.show("slow")})}),a(".scSns a").click(function(){var b,c=a("#siHrm li.scElps strong:eq(0)"),d=a(this).attr("data-type"),e=encodeURIComponent(c.text().trim()),f=encodeURIComponent(c.attr("title"));switch(d){case"fa":b="http://www.facebook.com/share.php?t="+e+"&u="+f;break;case"de":b="http://www.delicious.com/save?v=5&noui&jump=close&url="+f+"&title="+e;break;default:b="http://twitter.com/home?status="+e+" "+f}return popopen(b,"_pop_sns"),!1}),a("a[href=#popopen][data-srl]").click(function(){var b=a(this).attr("data-srl")||"";return b&&popopen(b.setQuery("is_poped","1"),"beluxePopup"),!1}),a("a[href=#tbk_action][class=delete]").click(function(){if(!confirm("Do you want to delete the selected trackback?"))return!1;var b=a(this).closest("li").find("a[name^=trackback_]").attr("name").replace(/.*_/g,"");return exec_json("beluxe.procBeluxeDeleteTrackback",{mid:current_mid,trackback_srl:b},completeCallModuleAction),!1}),a("a[href=#his_action][data-mode=delete][data-srl]").click(function(){if(!confirm("Do you want to delete the selected history?"))return!1;var b=a(this).attr("data-srl")||0,c=a(this).attr("data-doc")||0;return exec_json("beluxe.procBeluxeDeleteHistory",{mid:current_mid,history_srl:b,document_srl:c},completeCallModuleAction),!1}),a("a[href^=#][href$=recommend][data-type]").click(function(){var b=a(this),c=b.attr("href"),d=b.attr("data-type"),e=b.attr("data-srl"),f={target_srl:e,cur_mid:current_mid,mid:current_mid};return exec_json(d+".proc"+d.pidUcfirst()+("#recommend"==c?"VoteUp":"VoteDown"),f,function(a){if(alert(a.message),0===a.error){var d=b.find("em.cnt");d.text((parseInt(d.text())||0)+("#recommend"==c?1:-1))}}),!1}),a("a[href=#declare][data-type]").click(function(){var b,c,d=a(this),e=d.attr("data-type"),f=d.attr("data-srl"),g=d.attr("data-rec")||"0";return b=prompt(_DXS_MSGS_.declare,""),"string"!=typeof b?!1:b.trim()?(exec_json(e+".proc"+e.pidUcfirst()+"Declare",{target_srl:f,cur_mid:current_mid,mid:current_mid},function(a){if(alert(a.message),0===a.error&&"0"!=g){var c="[Board DX] Declare, received messages: "+f,d=current_url.setQuery("comment_srl","comment"==e?f:"");b=b+'<br /><br /><a href="'+d+'">'+d+"</a>",exec_json("communication.procCommunicationSendMessage",{receiver_srl:g,title:c,content:b},function(a){0!==a.error&&alert(a.message)})}}),!1):(c=a('<div class="dxc_minimsg">').html("Please enter the message."),d.parent().after(c),c.delay(3e3).fadeOut(2500,function(){a(this).remove()}),!1)}),a(".btnAdopt button[data-adopt-srl]").click(function(){var b,c=a(this),d=c.attr("data-adopt-srl")||"",e=c.attr("data-adopt-name")||"";return b=prompt("Send thanks message to "+e,""),"string"!=typeof b?!1:b.trim()?(exec_json("beluxe.procBeluxeAdoptComment",{comment_srl:d,send_message:b},function(a){alert(a.message),0===a.error&&location.reload()}),!1):(tmp=a('<div class="dxc_minimsg">').html("Please enter the message."),c.parent().after(tmp),tmp.delay(3e3).fadeOut(2500,function(){a(this).remove()}),!1)}),a("#siFbk .scFbWt form textarea[name=content]").focus(function(){a(".scWusr",a(this).closest("form")).show("slow")}),a(".scHLink[data-href]").click(function(){return window.open(a(this).attr("data-href"),a(this).attr("data-target")||""),!1}),a(".scToggle[data-target]").click(function(){return a(a(this).attr("data-target")).slideToggle(),!1}),a(".scClipboard").click(function(){var b=a(this).attr("data-attr")||!1;return prompt("press CTRL+C copy it to clipboard...",b?a(this).attr(b):a(this).text()),!1}),a.fn.pidSettingWrite=function(){a(".scWcateList",this).change(function(){var b=a(this).val(),c=a(this).data("key"),d=a(".scWcateList[data-key="+c+"]").hide("slow"),e=a(".scWcateList[data-key="+b+"]");a(this).data("key",b),a("input:hidden[name=category_srl]").val(b),a(".scWcateList[data-key="+d.data("key")+"]").hide("slow"),e.find(">option").length&&e.change().show("slow")}),a("input:hidden[name=category_srl]:eq(0)",this).each(function(){var b,c,d=a(this).val()||0;if(d>0)for(b=0;3>b&&(c=a(".scWcateList option[value="+d+"]").closest("select").val(d).data("key",d).change(),c&&c.attr("data-key"));b++)d=c.show("slow").attr("data-key");else a(".scWcateList:eq(0)").change()}),a(".scWul.extraKeys li.scWli:hidden:eq(0)",this).each(function(){a("#siWrt .scExTog:hidden").show().click(function(){return a("#siWrt .scWul.extraKeys li.scWli:hidden").show("slow"),a(this).hide(),!1})}),a("a[href=#insert_filelink]",this).click(function(){var b=a(this).closest("#insert_filelink").find("> input"),c=b.val(),d=a(this).attr("data-seq"),e=a(this).attr("data-srl");return void 0!==c&&c?(exec_json("Beluxe.procBeluxeInsertFileLink",{mid:current_mid,sequence_srl:d,document_srl:e,filelink_url:c},function(b){if(a("[id^=ckeditor_instance_]").length){var c=xe.getApp("xeuploader");1===c.length?c[0].loadFilelist():c=a("#xefu-container-"+b.sequence_srl).xeUploader()}else a(".xpress-editor").length&&reloadFileList(uploaderSettings[b.sequence_srl])}),!1):(alert("Please enter the file url.\nvirtual type example: http://... #.mov"),b.focus(),!1)})};try{var b,c=a(window.frameElement);c.is("[id=pidOframe]")&&(b=c.closest("html"))}catch(d){}a(window).ready(function(){a("a[type^=example\\/modal]").pidModalWindow(b||""),a("#siWrt:eq(0)").pidSettingWrite(),a("div[data-flash-fix=true]").pidModalFlashFix(),a("div[data-link-fix=true]").each(function(){a("a:not([target])",this).attr("target","_blank")}),"hide"!=getCookie("scCaLock")&&a("#siCat.colm").trigger("fadeIn.fast")}).load(function(){a("table#siLst").each(function(){var b=a(this),c=a("#siBody").parent().width(),d=b.outerWidth();if(d>c){var e=a("tr:eq(0) th.title",b).outerWidth()||150;if(tt=Math.floor((d-c+e)/(a("tr:eq(0) th",b).length-3)),!e||e>130)return;a("th, td",b).each(function(b){var c=a(this);if(!c.is(".title")){var d=c.width()-tt;c.css({"max-width":d>0?d:1})}})}}),a("#siFbk .scFbH + .scClst > .scFrm").each(function(){var b=a(this),c=b.outerWidth();400>c&&(a(".scFbt",b).css("width","auto"),a(".scCmtCon",b).css("margin-left","5px"))}),a(".scElps[data-active=true]").each(function(b){var c=a(this),d=a("> :eq(0)",c),e=a("> :eq(1)",c),f=c.width(),g=0;e.length&&(a("> img",e).length||e.text().trim()?g=e.addClass("_last").outerWidth(!0):e.remove()),d.css("width",f-g-5+"px").addClass("_first")}),a(".scContent [data-hottrack]").each(function(c){var d=a(this),e=d.attr("data-type"),f=d.attr("data-hottrack"),g=a('<a class="scHotTrack">').attr("href",f),h=d.outerWidth("gall"!==e)-("widg"===e?7:4);"TR"==d.get(0).tagName?d.find(">td:eq(0)").is(function(){g.prependTo(this).width(h),"lstc"===e&&g.height(d.outerHeight()+d.next().outerHeight())}):g.prependTo(this).width(h),d.is("[data-modal=1]")&&g.attr({type:"example/modal","data-header":":GETHTML:#pidModalHeader"}).pidModalWindow(b||"")}),a("#siFbk a[name^=comment][data-scroll=true]").last().parent().is(function(){this.scrollIntoView(!0)}),a(".pid_ajax-form input:text:eq(0)").focus()})}),function(a){var b=function(a,b){this.id=a,this.target=b?b:""};b.prototype.getBackDrop=function(){var b=a("#pidModalBackdrop",this.target);return b.length||(b=a('<div id="pidModalBackdrop" class="pid_modal-backdrop">').appendTo(a("body",this.target)).hide()),b},b.prototype.getModalFrame=function(){var b,c=a("#"+this.id,this.target);return c.length?c.not(".pid_modal-frame").addClass("pid_target-frame"):(b=a("body",this.target),c=a('<section id="'+this.id+'" class="pid_modal-frame">').appendTo(b).hide()),c.find(".pid_modal-body").length||c.append(a('<div class="pid_modal-body">')),c},b.prototype.setTitle=function(b,c,d){var e,f,g,h,i=function(b){var c,d={"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"'};return c=new RegExp("("+a.map(d,function(a,b){return b}).join("|")+")","g"),b.replace(c,function(a,b){return d[b]})},j=this.getModalFrame(),k=i(b),l=i(c),m=["pid_modal-head","pid_modal-foot"];":INHERIT:"!==k.substring(0,9)&&(":GETHTML:"===k.substring(0,9)&&(k=a(k.substring(9)).html()),f=j.find("div."+m[0]),f.length||(f=a('<div class="'+m[0]+'">').hide().prependTo(j)),h=k?f.html(k).show():f.html("").hide()),":INHERIT:"!==l.substring(0,9)&&(":GETHTML:"===l.substring(0,9)&&(l=a(l.substring(9)).html()),g=j.find("div."+m[1]),g.length||(g=a('<div class="'+m[1]+'">').hide().appendTo(j)),h=l?g.html(l).show():g.html("").hide()),e=j.find(".pid_modal-close"),e.length||(e=a('<button type="button" title="press esc to close" class="pid_modal-close">&times;</button>').click(d),j.prepend(e))},b.prototype.goUrl=function(b,c,d){var e=this.getModalFrame(),f=this.getBackDrop(),g=a("#pidOframe",e),h=a("div.wait[data-modal-child=message]"),i=function(b){var c=b.contentDocument||b.contentWindow.document;a("script[src*="+_PID_MODULE_+"]",c).length||(a(c).find("a").click(function(b){b.stopPropagation(),b.preventDefault(),parent.location.replace(a(this).attr("href"))}),g.pidAutoResize(g.attr("data-resize")))};h.length||(h=a('<div class="message update wait" data-modal-child="message">').html("<p>"+waiting_message+'<br />If time delays continue, <a href="'+b.setQuery("is_modal","")+'"><span>click here</span></a>.</p>'),a("body",this.target).append(h)),h.css({position:"fixed",top:10,left:10,zIndex:f.css("z-index")+1||99999}),b=b.setQuery("is_modal","1"),g.length?g.get(0).src=b:g=a('<iframe id="pidOframe" data-resize="'+c+'" allowTransparency="true" frameborder="0" scrolling="no" />').css({height:"100%",width:"100%"}).on("load",function(){d(),i(this),a(this).parent().scrollTop(0)}).attr("src",b).appendTo(a(".pid_modal-body:eq(0)",e))},b.prototype.getTopIndex=function(){var b=a("body",this.target),c=0;return b.find("> *").filter(function(){return"auto"!==a(this).css("z-index")}).each(function(b){var d=parseInt(a(this).css("z-index"));d>c&&(c=d)}),c+1},a.fn.pidAutoResize=function(b){var c,d,e,f,g,h,i,j,k,l,m,n=a(this);e=n[0].contentDocument||n[0].contentWindow.document,void 0!==e&&(e=a("body",e),e.is(":empty")||(clearInterval(n.data("timer")||0),n.add(e).scrollTop(0).css({padding:"0",margin:"0",overflow:"hidden"}),c=n.parent().parent(),f=a("div.pid_modal-head",c),h=a("div.pid_modal-body",c),g=a("div.pid_modal-foot",c),c.is(".pid_target-frame")?(a("[data-modal-child=message]",c.closest("body")).fadeOut(1500,function(){a(this).remove()}),m=setInterval(function(){k=e.outerHeight(!0),k>10&&(n.height(k),h.height(k)),c.find("#pidOframe").length||clearInterval(m)},500),c.show()):(c.show(),d=c.closest("body").find("#pidModalBackdrop"),pw=d.outerWidth(!0),i=d.outerHeight(!0),h.outerWidth(pw-80),c.position().left<1&&c.animate({top:10,left:Math.floor((pw-c.outerWidth(!0))/2)},{complete:function(){c.height(""),a("[data-modal-child=message]",c.closest("body")).fadeOut(1500,function(){a(this).remove()})}}),m=setInterval(function(){pw=d.outerWidth(!0),i=d.outerHeight(!0),h.outerWidth(pw-80),k=f.outerHeight(!0)||0,k=k+g.outerHeight(!0)||0,l=e.outerHeight(!0),l>10&&(n.height()!==l&&n.height(l),("hfix"===b||l>i-k-100)&&(l=i-k-100),h.height()!==l&&h.height(l),h.css("overflow-y",n.outerHeight()>h.height()?"auto":"hidden"),k=c.outerHeight(!0),j=Math.floor((i-k)/2-10),c.css({top:j>10?j:10,left:Math.floor((pw-c.outerWidth(!0))/2)})),c.find("#pidOframe").length||clearInterval(m)},500)),n.data("timer",m)))},a.fn.pidModalWindow=function(c,d){this.not(".pid_modal-anchor").addClass("pid_modal-anchor").each(function(){var d,e=a(this);d=(e.attr("type")||"").split("/"),"modal"===d[1]&&(this.modal=new b(d[2]?d[2]:"pidModalFrame",c))}).click(function(){var b=a(this),c=this.modal.getModalFrame();if("showing"===c.data("state")){if(c.is(".pid_target-frame"))return!1;b.trigger("close.mw")}else b.trigger("open.mw");return!1}).bind("open.mw",function(){var b,c,e,f,g,h=a(this),i=0;if(b=this.modal.getModalFrame().css({top:"0",left:"-150%"}),e=a.Event("before-open.mw"),h.trigger(e),e.isDefaultPrevented())return!1;b.is(".pid_target-frame")||(b.css({top:"0",left:"-150%"}),this.modal.setTitle(h.attr("data-header")||h.attr("title")||"",h.attr("data-footer")||"",function(){return h.trigger("close.mw"),!1}));var j=function(){h.trigger("after-open.mw")};g=h.data("go-url")||h.attr("href")||"about:blank","showing"!==b.data("state")&&(b.data("state","showing"),f=h.data("duration")||"fast",b.is(".pid_target-frame")?b.find("> *").hide(f,function(a){b.find("> div.pid_modal-body").show()}):(a(document).bind("keydown.mw",function(a){return 27===a.which?(h.trigger("close.mw"),!1):void 0}),c=this.modal.getBackDrop(),c.css("z-index","1"),b.not(".pid_target-frame").css("z-index","2"),i=this.modal.getTopIndex(),c.css("z-index",i).show(),b.css("z-index",i+1).find("button.pid_modal-close:first").focus(),d&&c.click(function(){return h.trigger("close.mw"),!1}))),this.modal.goUrl(g,h.attr("data-resize")||"auto",j)}).bind("close.mw",function(){var b,c,d,e,f=a(this);if(b=this.modal.getModalFrame(),d=a.Event("before-close.mw"),f.trigger(d),d.isDefaultPrevented())return!1;e=f.data("duration")||"fast",b.data("state","hiding");var g=function(){f.trigger("after-close.mw")};b.is(".pid_target-frame")?b.find("> *").show(e,function(a){b.find("> div.pid_modal-head").hide(),b.find("> div.pid_modal-body").hide(),b.find("> div.pid_modal-foot").hide()}):(c=this.modal.getBackDrop(),b.fadeOut(e,function(){g(),a(this).not(".pid_target-frame").hide(),c.hide(),a(this).find("> div.pid_modal-body").children().remove()})),f.focus()})},a.fn.pidModalFlashFix=function(){a("embed[type*=flash]",this).each(function(){var b=a(this);"transparent"!=b.attr("wmode"),b.attr("wmode","opaque")}),a("iframe[src*=youtube]",this).each(function(){var b=a(this);b.attr("src",b.attr("src").setQuery("wmode","opaque"))})};try{var c=a(window.frameElement);c.is("[id=pidOframe]")&&(a(document).on("ready",function(){c.pidAutoResize(c.attr("data-resize")),a("[data-modal-hide]").on("click",function(){return c.parent().parent().find("button.pid_modal-close:first").click(),!1})}),a(window).on("unload",function(){a("body").height(1),c.height("").parent().height(1),a("[data-modal-child=message]",c.closest("body")).remove()}))}catch(d){}}(jQuery);